<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ismail | The Legend's Story</title>
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        :root {
            --primary: #FF8400;
            --bg: #020202;
            --text: #ffffff;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* --- Story Section --- */
        .story-header {
            height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            background: radial-gradient(circle at center, rgba(255, 132, 0, 0.1) 0%, transparent 70%);
        }

        .story-header h1 {
            font-size: clamp(2.5rem, 10vw, 5rem);
            font-weight: 900;
            background: linear-gradient(90deg, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .story-header p {
            font-size: 1.2rem;
            opacity: 0.7;
            max-width: 600px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px 150px;
        }

        .section-title {
            color: var(--primary);
            font-size: 1.8rem;
            margin: 40px 0 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .qa-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .qa-card {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(15px);
            transition: 0.3s ease;
        }

        .qa-card:hover {
            border-color: var(--primary);
            background: rgba(255, 132, 0, 0.03);
            transform: translateY(-5px);
        }

        .question {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .answer {
            font-size: 1.05rem;
            color: rgba(255,255,255,0.8);
            border-left: 3px solid var(--border);
            padding-left: 20px;
        }

        /* --- Music Trigger Button --- */
        .music-trigger-btn {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: var(--primary); color: #000; border: none; padding: 18px 40px;
            border-radius: 50px; font-weight: 900; cursor: pointer; display: flex;
            align-items: center; gap: 12px; z-index: 1000; box-shadow: 0 10px 30px rgba(255, 132, 0, 0.4);
            font-size: 1.1rem; transition: 0.3s;
        }
        .music-trigger-btn:hover { transform: translateX(-50%) scale(1.05); background: #fff; }

        /* --- Full Player Overlay --- */
        #full-player {
            position: fixed; inset: 0; background: radial-gradient(circle at center, #111, #000);
            z-index: 9999; display: none; flex-direction: column; justify-content: center;
            align-items: center; opacity: 0;
        }

        .close-player { position: absolute; top: 30px; right: 30px; background: var(--glass); border: none; color: #fff; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; z-index: 10010; transition: 0.3s; }
        .close-player:hover { background: #ff4444; transform: rotate(90deg); }

        .player-content { width: 100%; max-width: 500px; text-align: center; padding: 20px; }

        /* --- Dynamic Name Display --- */
        .name-container { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; }
        .name-letter { font-size: 2.5rem; font-weight: 900; color: var(--primary); text-shadow: 0 0 15px rgba(255, 132, 0, 0.5); display: inline-block; }

        #visualizer-canvas { width: 100%; height: 120px; margin-bottom: 20px; filter: drop-shadow(0 0 10px var(--primary)); }

        .album-art { width: 180px; height: 180px; background: linear-gradient(45deg, var(--primary), #FF2E00); margin: 0 auto 25px; border-radius: 30px; display: flex; justify-content: center; align-items: center; box-shadow: 0 25px 50px rgba(0,0,0,0.6); border: 2px solid rgba(255,255,255,0.1); }

        .p-progress-bar { height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; cursor: pointer; margin-bottom: 10px; position: relative; }
        .p-progress-fill { height: 100%; width: 0%; background: var(--primary); border-radius: 10px; box-shadow: 0 0 15px var(--primary); }

        .time-labels { display: flex; justify-content: space-between; font-size: 0.8rem; opacity: 0.6; margin-bottom: 25px; font-family: monospace; }

        .p-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; width: 100%; max-width: 320px; margin-left: auto; margin-right: auto; }
        .p-btn { background: none; border: none; color: #fff; cursor: pointer; transition: 0.3s; }
        .p-btn:hover { color: var(--primary); transform: scale(1.2); }
        .p-btn.play-circle { background: #fff; color: #000; width: 70px; height: 70px; border-radius: 50%; display: flex; justify-content: center; align-items: center; }

        .playlist-toggle { background: var(--glass); border: 1px solid var(--border); color: #fff; padding: 12px 25px; border-radius: 15px; cursor: pointer; display: flex; align-items: center; gap: 10px; margin: 0 auto; transition: 0.3s; }

        #playlist-modal { position: absolute; bottom: 0; left: 0; width: 100%; background: #0a0a0a; border-radius: 30px 30px 0 0; padding: 35px 25px; transform: translateY(100%); transition: 0.5s ease; z-index: 10005; max-height: 70vh; overflow-y: auto; border-top: 1px solid var(--border); }
        #playlist-modal.active { transform: translateY(0); }
        .track-item { display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 12px; cursor: pointer; margin-bottom: 10px; background: rgba(255,255,255,0.02); }
        .track-item.active { border: 1px solid var(--primary); background: rgba(255,132,0,0.1); }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <header class="story-header">
        <h1>ইসমাইল</h1>
        <p>এক সাধারণ মানুষের অসাধারণ জীবনকাহিনী। যার প্রতিটি আড্ডায় থাকে আনন্দের ঢেউ।</p>
    </header>

    <div class="container">
        <h2 class="section-title"><i data-lucide="book-open"></i> জীবন ডায়েরি</h2>
        
        <div class="qa-grid">
            <div class="qa-card">
                <div class="question"><i data-lucide="user"></i> পরিচয়?</div>
                <div class="answer">ইসমাইল একজন প্রাণবন্ত মানুষ। বন্ধুদের আড্ডায় সে এক অপরিহার্য নাম। তার হাসিমাখা মুখ যেকোনো পরিবেশকে হালকা করে দিতে পারে।</div>
            </div>

            <div class="qa-card">
                <div class="question"><i data-lucide="star"></i> বিশেষ গুণ?</div>
                <div class="answer">সে খুব দ্রুত মানুষের সাথে মিশে যেতে পারে। তার উপস্থিত বুদ্ধিমত্তা আর মজার কথাগুলো তাকে সবার প্রিয় করে তুলেছে। সে শুধু একজন বন্ধু নয়, বরং বিপদে পাশে থাকা একজন ভরসার নাম।</div>
            </div>

            <div class="qa-card">
                <div class="question"><i data-lucide="coffee"></i> আড্ডার গল্প?</div>
                <div class="answer">ইসমাইলকে ছাড়া আড্ডা মানেই যেন লবন ছাড়া তরকারি। চায়ের দোকানে দীর্ঘ সময় কাটিয়ে দেওয়া আর জীবন নিয়ে গভীর সব আলোচনা করাই তার নেশা।</div>
            </div>

            <div class="qa-card">
                <div class="question"><i data-lucide="heart"></i> ব্যক্তিত্ব?</div>
                <div class="answer">অহংকারহীন এবং দয়ালু। সে মনে করে হাসিখুশি থাকাই জীবনের মূল সার্থকতা। তার সহজ-সরল জীবনবোধ অনেককেই অনুপ্রাণিত করে।</div>
            </div>
        </div>
    </div>

    <!-- Trigger Button -->
    <button class="music-trigger-btn" id="openPlayer">
        <i data-lucide="music-4"></i> জন্মদিনের গান
    </button>

    <!-- Player Overlay -->
    <div id="full-player">
        <button class="close-player" id="closePlayer"><i data-lucide="x"></i></button>

        <div class="player-content">
            <!-- TUSHAR Animated Name (You can change this to ISMAIL if you want) -->
            <div class="name-container" id="nameContainer">
                <span class="name-letter">T</span>
                <span class="name-letter">U</span>
                <span class="name-letter">S</span>
                <span class="name-letter">H</span>
                <span class="name-letter">A</span>
                <span class="name-letter">R</span>
            </div>

            <!-- Audio Spectrum -->
            <canvas id="visualizer-canvas"></canvas>

            <div class="album-art" id="artBox">
                <i data-lucide="disc-3" size="75" id="discIcon"></i>
            </div>

            <div class="song-details" style="margin-bottom:20px;">
                <h2 id="songTitle">গানের নাম</h2>
                <p id="subTitle">VIBING WITH THE LEGEND</p>
            </div>

            <div class="p-progress-bar" id="pWrapper">
                <div class="p-progress-fill" id="pFill"></div>
            </div>
            <div class="time-labels">
                <span id="pCurrent">0:00</span>
                <span id="pDuration">0:00</span>
            </div>

            <div class="p-controls">
                <button class="p-btn" id="pPrev"><i data-lucide="skip-back" fill="currentColor" size="24"></i></button>
                <button class="p-btn play-circle" id="pMainPlay">
                    <i data-lucide="play" id="pPlayIcon" fill="currentColor" size="30"></i>
                </button>
                <button class="p-btn" id="pNext"><i data-lucide="skip-forward" fill="currentColor" size="24"></i></button>
            </div>

            <button class="playlist-toggle" id="togglePlaylist">
                <i data-lucide="list-video"></i> আমার প্লেলিস্ট
            </button>
        </div>

        <!-- Playlist -->
        <div id="playlist-modal">
            <div style="display:flex; justify-content:space-between; margin-bottom:25px; align-items:center;">
                <h3>প্লেলিস্ট</h3>
                <button id="hidePlaylist" style="background:none; border:none; color:var(--primary); cursor:pointer; font-weight:bold;">বন্ধ করুন</button>
            </div>
            <div id="track-list"></div>
        </div>
    </div>

    <audio id="mainAudio" crossorigin="anonymous"></audio>

    <script>
        lucide.createIcons();

        // অডিও লিস্ট
        const songs = [
            { file: "Birthday_Song.mp3", desc: "Happy Birthday Song" },
            { file: "Music2.mp3", desc: "Ek Akasher Tara Phonk" },
            { file: "Music.mp3", desc: "Romantic Song" }
        ];

        let currentIdx = 0;
        let audioCtx, analyser, source, dataArray;
        let isInit = false;

        const audio = document.getElementById('mainAudio');
        const pPlayIcon = document.getElementById('pPlayIcon');
        const pFill = document.getElementById('pFill');
        const visCanvas = document.getElementById('visualizer-canvas');
        const visCtx = visCanvas.getContext('2d');
        const letters = document.querySelectorAll('.name-letter');

        function initVisualizer() {
            if (isInit) return;
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioCtx.createAnalyser();
            source = audioCtx.createMediaElementSource(audio);
            source.connect(analyser);
            analyser.connect(audioCtx.destination);
            analyser.fftSize = 256;
            dataArray = new Uint8Array(analyser.frequencyBinCount);
            isInit = true;
            render();
        }

        function render() {
            requestAnimationFrame(render);
            analyser.getByteFrequencyData(dataArray);

            const w = visCanvas.width = visCanvas.clientWidth;
            const h = visCanvas.height = visCanvas.clientHeight;
            visCtx.clearRect(0, 0, w, h);

            const bWidth = (w / dataArray.length) * 2.5;
            let x = 0;

            for (let i = 0; i < dataArray.length; i++) {
                const bHeight = dataArray[i] / 1.5;
                visCtx.fillStyle = `rgb(255, ${130 + i}, 0)`;
                visCtx.beginPath();
                visCtx.roundRect(x, h - bHeight, bWidth - 2, bHeight, [4, 4, 0, 0]);
                visCtx.fill();

                // Name bounce logic
                if (i < letters.length) {
                    const bounce = (dataArray[i * 4] / 255) * 35;
                    letters[i].style.transform = `translateY(${-bounce}px)`;
                }
                x += bWidth;
            }
        }

        function selectTrack(i) {
            currentIdx = i;
            audio.src = songs[i].file;
            document.getElementById('songTitle').innerText = songs[i].file.replace('.mp3', '').replace(/_/g, ' ').toUpperCase();
            document.getElementById('subTitle').innerText = songs[i].desc;
            
            initVisualizer();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            audio.play().then(() => updateUI(true)).catch(() => updateUI(false));
            initPlaylistUI();
        }

        function updateUI(playing) {
            pPlayIcon.setAttribute('data-lucide', playing ? 'pause' : 'play');
            lucide.createIcons();
            gsap.to("#artBox", { scale: playing ? 1.05 : 1, duration: 0.4 });
            gsap.to("#discIcon", { rotation: playing ? "+=360" : "+=0", repeat: playing ? -1 : 0, duration: 3, ease: "none" });
        }

        document.getElementById('pMainPlay').onclick = () => {
            if (audio.paused) audio.play().then(() => updateUI(true));
            else { audio.pause(); updateUI(false); }
        };

        document.getElementById('pNext').onclick = () => selectTrack((currentIdx + 1) % songs.length);
        document.getElementById('pPrev').onclick = () => selectTrack((currentIdx - 1 + songs.length) % songs.length);

        audio.ontimeupdate = () => {
            if (audio.duration) {
                pFill.style.width = (audio.currentTime / audio.duration) * 100 + '%';
                document.getElementById('pCurrent').innerText = formatTime(audio.currentTime);
                document.getElementById('pDuration').innerText = formatTime(audio.duration);
            }
        };

        document.getElementById('pWrapper').onclick = (e) => {
            audio.currentTime = (e.offsetX / e.currentTarget.clientWidth) * audio.duration;
        };

        document.getElementById('openPlayer').onclick = () => {
            document.getElementById('full-player').style.display = 'flex';
            gsap.to("#full-player", { opacity: 1, duration: 0.5 });
            initVisualizer();
        };

        document.getElementById('closePlayer').onclick = () => {
            gsap.to("#full-player", { opacity: 0, duration: 0.3, onComplete: () => document.getElementById('full-player').style.display = 'none' });
        };

        function initPlaylistUI() {
            const list = document.getElementById('track-list');
            list.innerHTML = '';
            songs.forEach((s, i) => {
                const item = document.createElement('div');
                item.className = `track-item ${i === currentIdx ? 'active' : ''}`;
                item.innerHTML = `<span style="color:var(--primary); font-weight:900;">${i+1}</span> <span style="flex:1;">${s.file.toUpperCase()}</span> <i data-lucide="music-2" size="16"></i>`;
                item.onclick = () => { selectTrack(i); document.getElementById('playlist-modal').classList.remove('active'); };
                list.appendChild(item);
            });
            lucide.createIcons();
        }

        document.getElementById('togglePlaylist').onclick = () => document.getElementById('playlist-modal').classList.add('active');
        document.getElementById('hidePlaylist').onclick = () => document.getElementById('playlist-modal').classList.remove('active');

        function formatTime(t) {
            const m = Math.floor(t/60), s = Math.floor(t%60);
            return `${m}:${s < 10 ? '0'+s : s}`;
        }

        initPlaylistUI();
        selectTrack(0); audio.pause();

        // BG Particles
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        function bg() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "rgba(255,132,0,0.05)";
            for(let i=0; i<30; i++) { ctx.beginPath(); ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height, 1, 0, Math.PI*2); ctx.fill(); }
            requestAnimationFrame(bg);
        }
        bg();
    </script>
</body>
</html>

